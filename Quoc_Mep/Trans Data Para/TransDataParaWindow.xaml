<Window x:Class="Quoc_MEP.TransDataParaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="Copy Dá»¯ Liá»‡u Giá»¯a Parameters" 
        Height="950" Width="700"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        MinWidth="600"
        MinHeight="700"
        Loaded="Window_Loaded"
        Background="#F5F5F5">
    <Window.Resources>
        <!-- Run Button Style (Green) -->
        <Style x:Key="RunButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#4CAF50"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="#388E3C" 
                                BorderThickness="1" 
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#45A049"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#388E3C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Close Button Style (Red) -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#F44336"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="#D32F2F" 
                                BorderThickness="1" 
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#E53935"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#D32F2F"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid Margin="20">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Header -->
                <ui:Card Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="ðŸ“‹ Copy Parameter Data Between Groups" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="#1976D2"
                                   Margin="0,0,0,5"/>
                        <TextBlock Text="Sao chÃ©p giÃ¡ trá»‹ parameter tá»« Group nguá»“n sang Group Ä‘Ã­ch" 
                                   FontSize="12" 
                                   Foreground="#666666"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </ui:Card>

                <!-- Category Filter -->
                <ui:Card Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="ðŸ” Select Categories" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="#333333"
                                   Margin="0,0,0,10"/>
                        
                        <!-- Search TextBox -->
                        <ui:TextBox x:Name="CategorySearchBox" 
                                    PlaceholderText="Filter categories..."
                                    Icon="{ui:SymbolIcon Search24}"
                                    TextChanged="CategorySearchBox_TextChanged"
                                    Margin="0,0,0,10"/>
                        
                        <!-- Select Categories ListBox -->
                        <Border BorderBrush="#CCCCCC" 
                                BorderThickness="1" 
                                CornerRadius="4"
                                Margin="0,0,0,10"
                                Background="White">
                            <ListBox x:Name="CategoryListBox" 
                                     Height="200" 
                                     SelectionMode="Multiple"
                                     FontSize="12"
                                     SelectionChanged="CategoryListBox_SelectionChanged"
                                     Background="White"
                                     Foreground="#333333">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox Content="{Binding}" 
                                                  IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}"
                                                  FontSize="12"
                                                  Foreground="#333333"/>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </Border>
                        
                        <!-- Hide Unselected Checkbox - MOVED HERE -->
                        <CheckBox x:Name="HideUnselectedCategoriesCheckBox"
                                  Content="Hide un-checked categories"
                                  FontSize="12"
                                  Foreground="#333333"
                                  Margin="0,0,0,10"
                                  Checked="HideUnselectedCategoriesCheckBox_Changed"
                                  Unchecked="HideUnselectedCategoriesCheckBox_Changed"/>
                        
                        <!-- Check All / Check None Buttons -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <ui:Button x:Name="CheckAllButton" 
                                       Content="Check All" 
                                       Grid.Column="0"
                                       Icon="{ui:SymbolIcon CheckboxChecked24}"
                                       Appearance="Secondary"
                                       Click="CheckAllButton_Click"/>
                                    
                            <ui:Button x:Name="CheckNoneButton" 
                                       Content="Check None" 
                                       Grid.Column="2"
                                       Icon="{ui:SymbolIcon CheckboxUnchecked24}"
                                       Appearance="Secondary"
                                       Click="CheckNoneButton_Click"/>
                        </Grid>
                    </StackPanel>
                </ui:Card>

                <!-- Source Group -->
                <ui:Card Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="ðŸ“¤ Group Nguá»“n (Source)" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="#2E7D32"
                                   Margin="0,0,0,10"/>
                        
                        <!-- Group Name ComboBox -->
                        <TextBlock Text="Group Name:" FontSize="12" Foreground="#333333" Margin="0,0,0,5"/>
                        <ComboBox x:Name="SourceGroupCombo" 
                                  IsEditable="True"
                                  Margin="0,0,0,10"
                                  Height="36"
                                  Background="White"
                                  Foreground="#333333"
                                  SelectionChanged="SourceGroupCombo_SelectionChanged"
                                  DropDownOpened="SourceGroupCombo_DropDownOpened"/>

                        <!-- Parameter Name ComboBox -->
                        <TextBlock Text="Parameter Name:" FontSize="12" Foreground="#333333" Margin="0,0,0,5"/>
                        
                        <!-- Loading Status -->
                        <TextBlock x:Name="SourceLoadingStatus" 
                                   Text="{Binding LoadingStatus}"
                                   FontSize="11" 
                                   FontStyle="Italic"
                                   Foreground="#FF6B00"
                                   Margin="0,0,0,5"
                                   Visibility="Collapsed"/>
                        
                        <ComboBox x:Name="SourceParameterCombo" 
                                  IsEditable="True"
                                  Height="36"
                                  Background="White"
                                  Foreground="#333333"
                                  SelectionChanged="SourceParameterCombo_SelectionChanged"
                                  DropDownOpened="SourceParameterCombo_DropDownOpened"/>
                    </StackPanel>
                </ui:Card>

                <!-- Target Group -->
                <ui:Card Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="ðŸ“¥ Group ÄÃ­ch (Target)" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="#D32F2F"
                                   Margin="0,0,0,10"/>
                        
                        <!-- Group Name ComboBox -->
                        <TextBlock Text="Group Name:" FontSize="12" Foreground="#333333" Margin="0,0,0,5"/>
                        <ComboBox x:Name="TargetGroupCombo" 
                                  IsEditable="True"
                                  Margin="0,0,0,10"
                                  Height="36"
                                  Background="White"
                                  Foreground="#333333"
                                  SelectionChanged="TargetGroupCombo_SelectionChanged"
                                  DropDownOpened="TargetGroupCombo_DropDownOpened"/>

                        <!-- Parameter Name ComboBox -->
                        <TextBlock Text="Parameter Name:" FontSize="12" Foreground="#333333" Margin="0,0,0,5"/>
                        
                        <!-- Loading Status -->
                        <TextBlock x:Name="TargetLoadingStatus" 
                                   Text="{Binding LoadingStatus}"
                                   FontSize="11" 
                                   FontStyle="Italic"
                                   Foreground="#FF6B00"
                                   Margin="0,0,0,5"
                                   Visibility="Collapsed"/>
                        
                        <ComboBox x:Name="TargetParameterCombo" 
                                  IsEditable="True"
                                  Height="36"
                                  Background="White"
                                  Foreground="#333333"
                                  SelectionChanged="TargetParameterCombo_SelectionChanged"
                                  DropDownOpened="TargetParameterCombo_DropDownOpened"/>
                    </StackPanel>
                </ui:Card>

                <!-- Copy Options -->
                <ui:Card Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="âš™ï¸ Copy Options" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="#333333"
                                   Margin="0,0,0,10"/>
                        
                        <CheckBox x:Name="OverwriteExistingCheckBox"
                                  Content="Overwrite existing values (ghi Ä‘Ã¨ giÃ¡ trá»‹ Ä‘Ã£ cÃ³)"
                                  FontSize="12"
                                  Foreground="#333333"
                                  IsChecked="False"/>
                        
                        <TextBlock Text="âœ“ Unchecked: Only copy to empty/null parameters&#x0a;âœ“ Checked: Overwrite all parameters including existing values"
                                   Foreground="#666666"
                                   FontSize="11" 
                                   Margin="25,5,0,0"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </ui:Card>

                <!-- Buttons -->
                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button x:Name="RunButton" 
                            Content="Run Copy" 
                            Grid.Column="0"
                            Style="{StaticResource RunButtonStyle}"
                            Height="44"
                            FontSize="14"
                            Click="RunButton_Click"
                            Cursor="Hand"/>
                            
                    <Button x:Name="CloseButton" 
                            Content="Close" 
                            Grid.Column="2"
                            Style="{StaticResource CloseButtonStyle}"
                            Height="44"
                            FontSize="14"
                            Click="CloseButton_Click"
                            Cursor="Hand"/>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
